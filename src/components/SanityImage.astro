---
import { urlFor } from '../lib/sanity'

interface Props {
  image: any
  alt?: string
  width?: number
  height?: number
  class?: string
  loading?: 'lazy' | 'eager'
}

const { image, alt = '', width, height, class: className, loading = 'lazy' } = Astro.props

if (!image) {
  return null
}

let imageUrl = urlFor(image)

if (width) {
  imageUrl = imageUrl.width(width)
}

if (height) {
  imageUrl = imageUrl.height(height)
}

const src = imageUrl.url()
---

<img 
  src={src} 
  alt={alt} 
  width={width} 
  height={height} 
  class={className}
  loading={loading}
/>